--[[
    Maveryk Hub - Pet Swarm Simulator
    Versão: Insane Farme com Multi-Threads e Velocidade Ajustável
    Desenvolvido por Maveryk1t
]]

-- Carregar biblioteca de interface
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- Serviços do Roblox
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Workspace = game:GetService("Workspace")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- Remotes (comandos do jogo)
local Remotes = ReplicatedStorage and ReplicatedStorage:FindFirstChild("Remotes")
local Functions = Remotes and Remotes:FindFirstChild("Functions")
local Events = Remotes and Remotes:FindFirstChild("Events")

local CombatRemote = Functions and Functions:FindFirstChild("CombatRF")           -- Atacar
local CollectionRemote = Functions and Functions:FindFirstChild("CollectionRF")   -- Coletar comida
local HatchRemote = Events and Events:FindFirstChild("HatchEggEvent")             -- Chocar ovo
local PlantRemote = Events and Events:FindFirstChild("PlantEggEvent")             -- Plantar ovo
local FeedRemote = Events and Events:FindFirstChild("FeedEggEvent")               -- Alimentar ninho
local SacrificeRemote = Functions and Functions:FindFirstChild("SacrificeFunction") -- Sacrificar
local ZonesRF = Functions and Functions:FindFirstChild("ZonesRF")                 -- Carregar zona

-- Variáveis de controle
local active = false                    -- Farm ligado/desligado
local eggsSelected = {}                  -- Ovos selecionados para plantar
local bossEnabled = {}                   -- Bosses ativados
local activeBosses = {}                   -- Bosses vivos atualmente
local jumpConnection = nil                -- Conexão do pulo duplo
local jumpCount = 0                       -- Contador de pulos
local startDebounce = false                -- Evitar múltiplos starts

-- Cache para otimização
local cache = {
    pets = { value = nil, lastUpdate = 0 },
    nests = { value = nil, lastUpdate = 0 },
    zones = {}  -- Zonas cacheadas
}

-- Cache de zonas (carregar uma vez)
local zoneList = {
    "SummerEvent1", "WinterEvent1", "EleEgg1", "6", "4", "15", "10", "27",
    "30", "11", "34", "12.1", "1", "3", "7", "8", "9", "12", "13", "14",
    "Boss1", "Boss2", "Boss4",
    "SummerEventZone", "WinterEventZone", "Zone12.1", "ElementEventZone1",
    "Zone2", "Zone5", "Zone10", "Zone12",
    "Zone2B1", "Zone5B1", "Zone10B1", "Zone12B1", "Zone12B3", "Zone12B2",
    "SummerEventZoneB1", "WinterEventZoneB1", "ElementEventZoneB1"
}

for _, z in ipairs(zoneList) do
    local success, result = pcall(function()
        return Workspace.Zones:FindFirstChild(z)
    end)
    if success and result then
        cache.zones[z] = result
    end
end

-- Mapa de zonas dos bosses
local bossZoneMap = {
    Naga = "Zone2B1",
    ["Lava Monster"] = "Zone5B1",
    ["Tiki Monster"] = "Zone10B1",
    ["The Frozen Ancient"] = "Zone12B1",
    ["The Big 100M"] = "Zone12B3",
    ["The Ethereal Everia"] = "Zone12B2",
    ["Hornet Boss"] = "SummerEventZoneB1",
    ["The Ice Serpent"] = "WinterEventZoneB1",
    ["Great Sphinx"] = "ElementEventZoneB1",
}

-- Lista de inimigos (SEM OVOS DE BOSS)
local enemyList = {
    { name = "Summer", zone = "SummerEventZone", attackAll = true },
    { name = "Winter", zone = "WinterEventZone", attackAll = true },
    { name = "Sphinx (Evil Eagle)", zone = "ElementEventZone1", enemy = "Evil Eagle", needsRequest = true },
    { name = "Cursed Mummy", zone = "Zone2", enemy = "Cursed Mummy", needsRequest = true },
    { name = "Crazy Unicorn", zone = "Zone5", enemy = "Crazy Unicorn", needsRequest = true },
    { name = "Terror Tree", zone = "Zone10", enemy = "Terror Tree", needsRequest = true },
    { name = "Draco's Guard", zone = "Zone12", enemy = "Draco's Guard", needsRequest = true },
}

-- Estado dos inimigos (ativado/desativado)
local enemyEnabled = {}
for i, enemy in ipairs(enemyList) do
    enemyEnabled[i] = false
end

-- Zonas de comida
local foodZones = {
    { name = "Crystal Food", zone = "Zone12.1", enabled = false },
    { name = "Draco Food", zone = "Zone12", enabled = false },
}

-- Configurações do usuário
local config = {
    farmBosses = false,      -- Atacar bosses?
    farmEnemies = false,      -- Atacar inimigos?
    farmFood = false,         -- Coletar comida?
    autoPlant = false,        -- Plantar ovos?
    autoHatch = false,        -- Chocar ovos?
    autoNests = false,        -- Alimentar ninhos?
    sacrificeQueen = false,   -- Sacrificar Queen Bee?
    sacrificeKing = false,    -- Sacrificar King Bee?
    sacrificeFrozen = false,  -- Sacrificar Frozen Werewolf?
    sacrificeWalrus = false,  -- Sacrificar Walrus?
    sacrificeFennec = false,  -- Sacrificar Fennec Fox?
    sacrificeMystic = false,  -- Sacrificar Mystic Camel?
    doubleJump = false,       -- Pulo duplo?
    wallspeed = 16,           -- Velocidade de andar
    plantSpeed = 0.1,         -- Velocidade de plantio (agora pode ir até 0.001)
    hatchSpeed = 0.1,         -- Velocidade de chocar (agora pode ir até 0.001)
    nestsSpeed = 0.1,         -- Velocidade de ninhos (agora pode ir até 0.001)
    bossThreads = 1,          -- Número de threads para bosses
    enemyThreads = 1,         -- Número de threads para inimigos
    foodThreads = 1,          -- Número de threads para comida
    plantThreads = 1,         -- Número de threads para plantio
    hatchThreads = 1,         -- Número de threads para chocar
    nestsThreads = 1,         -- Número de threads para ninhos
}

-- Lista de bosses (sem ovos)
local bossList = {
    "Naga", "Lava Monster", "Tiki Monster",
    "The Frozen Ancient", "The Big 100M", "The Ethereal Everia",
    "Hornet Boss", "The Ice Serpent", "Great Sphinx"
}
for _, name in ipairs(bossList) do bossEnabled[name] = true end

-- Lista de ovos (SEM OVOS DE BOSS)
local eggData = {
    { name = "Summer Egg", zone = "SummerEvent1" },
    { name = "Winter Egg", zone = "WinterEvent1" },
    { name = "Sphinx Egg", zone = "EleEgg1" },
    { name = "Desert Egg", zone = "6" },
    { name = "Swamp Egg", zone = "4" },
    { name = "Sky Egg", zone = "15" },
    { name = "Cosmos Egg", zone = "10" },
    { name = "Void Egg", zone = "27" },
    { name = "Tiki Egg", zone = "30" },
    { name = "Tiki Island Egg", zone = "11" },
    { name = "Draco Egg", zone = "34" },
    { name = "Crystal Egg", zone = "12.1" },
    { name = "Octopus Egg", zone = "30" },
    { name = "Forest Egg", zone = "1" },
    { name = "Frozen Egg", zone = "3" },
    { name = "Magma Egg", zone = "7" },
    { name = "Atlantis Egg", zone = "8" },
    { name = "Aqua Egg", zone = "9" },
    { name = "Egg Of Oblivion", zone = "12" },
    { name = "Mythical Egg", zone = "13" },
    { name = "Legendary Egg", zone = "14" },
}

--[[
    FUNÇÕES AUXILIARES
    - Gerenciamento de cache
    - Ataques e coleta
]]

-- Pegar zona do cache
local function getZone(name)
    return cache.zones[name]
end

-- Pegar lista de pets (com cache de 0.5s)
local function getPets()
    if not cache.pets.value or os.clock() - cache.pets.lastUpdate > 0.5 then
        if LocalPlayer.Character then
            local pets = LocalPlayer.Character:FindFirstChild("Pets")
            cache.pets.value = pets and pets:GetChildren() or {}
        else
            cache.pets.value = {}
        end
        cache.pets.lastUpdate = os.clock()
    end
    return cache.pets.value
end

-- Atualizar cache quando personagem mudar
LocalPlayer.CharacterAdded:Connect(function()
    cache.pets.lastUpdate = 0
end)

-- Pegar ninhos (com cache de 10s)
local function getNests()
    if not cache.nests.value or os.clock() - cache.nests.lastUpdate > 10 then
        cache.nests.value = Workspace:FindFirstChild("Nests")
        cache.nests.lastUpdate = os.clock()
    end
    return cache.nests.value
end

-- Atacar inimigo com 1 pet (simples e eficiente)
local function attackEnemy(enemy)
    local pets = getPets()
    if #pets == 0 then return end
    pcall(CombatRemote.InvokeServer, CombatRemote, "AttackEnemy", enemy, pets[1])
end

-- Atacar todos inimigos de uma zona
local function attackAllEnemies(zoneName, needsRequest)
    if needsRequest then
        pcall(ZonesRF.InvokeServer, ZonesRF, "RequestZoneMap", zoneName)
        task.wait(0.1)
    end
    local zone = getZone(zoneName)
    if zone and zone:FindFirstChild("Enemies") then
        local enemies = zone.Enemies:GetChildren()
        for _, enemy in ipairs(enemies) do
            attackEnemy(enemy)
        end
    end
end

-- Atacar inimigo específico
local function attackSpecificEnemy(zoneName, enemyName, needsRequest)
    if needsRequest then
        pcall(ZonesRF.InvokeServer, ZonesRF, "RequestZoneMap", zoneName)
        task.wait(0.1)
    end
    local zone = getZone(zoneName)
    if zone and zone:FindFirstChild("Enemies") then
        local enemy = zone.Enemies:FindFirstChild(enemyName)
        if enemy then
            attackEnemy(enemy)
        end
    end
end

-- Atacar todos os bosses vivos
local function attackBosses()
    for _, boss in ipairs(activeBosses) do
        if boss and boss.Parent then
            local pets = getPets()
            if #pets > 0 then
                pcall(CombatRemote.InvokeServer, CombatRemote, "AttackEnemy", boss, pets[1])
            end
        end
    end
end

-- Coletar comida de uma zona
local function collectFoodFromZone(zoneName)
    local zone = getZone(zoneName)
    if zone and zone:FindFirstChild("FoodSpawns") then
        local foods = zone.FoodSpawns:GetChildren()
        for _, f in ipairs(foods) do
            local pets = getPets()
            if #pets > 0 then
                pcall(CollectionRemote.InvokeServer, CollectionRemote, "CollectFood", f, pets[1])
            end
        end
    end
end

--[[
    WORKERS (THREADS DE FARM)
    Cada worker roda em uma thread separada
]]

-- Worker de bosses (a cada 1s)
local function bossesWorker()
    while active do
        if config.farmBosses then
            attackBosses()
        end
        task.wait(1)
    end
end

-- Worker de inimigos (a cada 1s)
local function enemiesWorker()
    while active do
        if config.farmEnemies then
            for idx, enemy in ipairs(enemyList) do
                if enemyEnabled[idx] then
                    if enemy.attackAll then
                        attackAllEnemies(enemy.zone, enemy.needsRequest)
                    else
                        attackSpecificEnemy(enemy.zone, enemy.enemy, enemy.needsRequest)
                    end
                end
            end
        end
        task.wait(1)
    end
end

-- Worker de comida (a cada 1s)
local function foodWorker()
    while active do
        if config.farmFood then
            for _, foodZone in ipairs(foodZones) do
                if foodZone.enabled then
                    collectFoodFromZone(foodZone.zone)
                end
            end
        end
        task.wait(1)
    end
end

-- Worker de plantio (velocidade configurável)
local function plantWorker()
    while active do
        if config.autoPlant and #eggsSelected > 0 then
            for _, zone in ipairs(eggsSelected) do
                for _ = 1, 9 do
                    pcall(PlantRemote.FireServer, PlantRemote, zone)
                end
            end
        end
        task.wait(config.plantSpeed)
    end
end

-- Worker de hatch (velocidade configurável)
local function hatchWorker()
    while active do
        if config.autoHatch then
            pcall(HatchRemote.FireServer, HatchRemote)
        end
        task.wait(config.hatchSpeed)
    end
end

-- Worker de ninhos (velocidade configurável)
local function nestsWorker()
    while active do
        if config.autoNests then
            local nests = getNests()
            if nests then
                for _, nest in ipairs(nests:GetChildren()) do
                    pcall(FeedRemote.FireServer, FeedRemote, nest)
                end
            end
        end
        task.wait(config.nestsSpeed)
    end
end

-- Função auxiliar para iniciar múltiplas threads
local function spawnWorkers(workerFunc, count)
    for i = 1, count do
        task.spawn(workerFunc)
    end
end

--[[
    SISTEMA DE SACRIFÍCIO
    Totalmente reformulado para funcionar em loop
]]

-- Estado dos loops de sacrifício
local sacrificeActive = {
    queen = false,
    king = false,
    frozen = false,
    walrus = false,
    fennec = false,
    mystic = false
}

-- Threads de sacrifício
local sacrificeThreads = {}

-- Função para sacrificar um pet (usada tanto no loop quanto no botão)
local function sacrificePet(petName)
    local success = pcall(function()
        SacrificeRemote:InvokeServer("SacrificeWell", petName)
    end)
    if success then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "Sacrifice",
            Text = petName .. " sacrificed!",
            Duration = 2
        })
    end
    return success
end

-- Função para iniciar/parar loop de um pet
local function toggleSacrifice(petName, enable)
    local key = petName:lower():gsub(" ", "")
    
    if enable then
        -- Se já existe uma thread, mata antes de criar nova
        if sacrificeThreads[key] then
            task.cancel(sacrificeThreads[key])
            sacrificeThreads[key] = nil
        end
        
        -- Cria nova thread de loop
        sacrificeThreads[key] = task.spawn(function()
            -- Carrega as zonas necessárias
            pcall(ZonesRF.InvokeServer, ZonesRF, "RequestZoneMap", "SummerEventZone")
            pcall(ZonesRF.InvokeServer, ZonesRF, "RequestZoneMap", "ElementEventZone1")
            task.wait(1)
            
            -- Loop principal
            while active and sacrificeActive[key] do
                sacrificePet(petName)
                task.wait(5) -- 5 segundos entre sacrifícios
            end
        end)
    else
        -- Mata a thread se existir
        if sacrificeThreads[key] then
            task.cancel(sacrificeThreads[key])
            sacrificeThreads[key] = nil
        end
    end
end

-- Parar todos os loops de sacrifício
local function stopAllSacrifices()
    for _, thread in pairs(sacrificeThreads) do
        task.cancel(thread)
    end
    sacrificeThreads = {}
    sacrificeActive.queen = false
    sacrificeActive.king = false
    sacrificeActive.frozen = false
    sacrificeActive.walrus = false
    sacrificeActive.fennec = false
    sacrificeActive.mystic = false
end

--[[
    SCAN DE BOSSES
    Atualiza a lista de bosses vivos
]]

local function scanBosses()
    if not config.farmBosses then return end
    local newActive = {}
    for _, name in ipairs(bossList) do
        if bossEnabled[name] then
            local zone = getZone(bossZoneMap[name])
            if zone and zone:FindFirstChild("Enemies") then
                local enemy = zone.Enemies:FindFirstChild(name)
                if enemy then
                    table.insert(newActive, enemy)
                end
            end
        end
    end
    activeBosses = newActive
end

-- Worker de scan (roda a cada 15s) - apenas uma thread
local function bossScanWorker()
    while active do
        scanBosses()
        task.wait(15)
    end
end

--[[
    CONTROLE DO FARM
    Iniciar e parar todas as threads
]]

local function stopAllThreads()
    activeBosses = {}
    -- As threads morrem quando active = false
end

local function start()
    if active then return end
    active = true
    scanBosses()
    
    -- Inicia threads de farm com base nas configurações de thread count
    spawnWorkers(bossesWorker, config.bossThreads)
    spawnWorkers(enemiesWorker, config.enemyThreads)
    spawnWorkers(foodWorker, config.foodThreads)
    spawnWorkers(plantWorker, config.plantThreads)
    spawnWorkers(hatchWorker, config.hatchThreads)
    spawnWorkers(nestsWorker, config.nestsThreads)
    task.spawn(bossScanWorker) -- apenas uma thread para scan
    
    -- Inicia threads de sacrifício se necessário
    if sacrificeActive.queen then toggleSacrifice("Queen Bee", true) end
    if sacrificeActive.king then toggleSacrifice("King Bee", true) end
    if sacrificeActive.frozen then toggleSacrifice("Frozen Werewolf", true) end
    if sacrificeActive.walrus then toggleSacrifice("Walrus", true) end
    if sacrificeActive.fennec then toggleSacrifice("Fennec Fox", true) end
    if sacrificeActive.mystic then toggleSacrifice("Mystic Camel", true) end
end

local function stop()
    active = false
    stopAllSacrifices()
    stopAllThreads()
    task.wait(1)
end

--[[
    INTERFACE GRÁFICA
    Usando Rayfield
]]

local win = Rayfield:CreateWindow({
    Name = "Maveryk Hub",
    LoadingTitle = "Pet Swarm Sim",
    LoadingSubtitle = "Insane farme",
    ConfigurationSaving = { Enabled = true, FolderName = "MaverykHub", FileName = "Config" },
    Theme = "Dark"
})

-- ABA PRINCIPAL
local mainTab = win:CreateTab("Main")
mainTab:CreateSection("Control")
mainTab:CreateButton({ Name = "Start Farming", Callback = start })
mainTab:CreateButton({ Name = "Stop Farming", Callback = stop })

mainTab:CreateSection("Status")
local statusLabel = mainTab:CreateLabel("Status: Stopped")
local bossStatus = mainTab:CreateLabel("Bosses: OFF")
local enemyStatus = mainTab:CreateLabel("Enemies: OFF")
local foodStatus = mainTab:CreateLabel("Food: OFF")
local eggStatus = mainTab:CreateLabel("Eggs: OFF")
local sacrificeStatus = mainTab:CreateLabel("Sacrifice: OFF")

-- Atualizar status em tempo real
task.spawn(function()
    while true do
        task.wait(0.5)
        if active then
            statusLabel:Set("Status: Active")
            bossStatus:Set("Bosses: " .. (config.farmBosses and "ON" or "OFF"))
            
            local anyEnemy = false
            for _, enabled in pairs(enemyEnabled) do
                if enabled then anyEnemy = true break end
            end
            enemyStatus:Set("Enemies: " .. (anyEnemy and "ON" or "OFF"))
            
            local anyFood = false
            for _, foodZone in ipairs(foodZones) do
                if foodZone.enabled then anyFood = true break end
            end
            foodStatus:Set("Food: " .. (anyFood and "ON" or "OFF"))
            
            eggStatus:Set("Eggs: " .. ((config.autoPlant or config.autoHatch) and "ON" or "OFF"))
            
            local anySac = sacrificeActive.queen or sacrificeActive.king or sacrificeActive.frozen or sacrificeActive.walrus or sacrificeActive.fennec or sacrificeActive.mystic
            sacrificeStatus:Set("Sacrifice: " .. (anySac and "ON" or "OFF"))
        else
            statusLabel:Set("Status: Stopped")
            bossStatus:Set("Bosses: OFF")
            enemyStatus:Set("Enemies: OFF")
            foodStatus:Set("Food: OFF")
            eggStatus:Set("Eggs: OFF")
            sacrificeStatus:Set("Sacrifice: OFF")
        end
    end
end)

mainTab:CreateSection("Credits")
mainTab:CreateLabel("developed by Maveryk1t")
mainTab:CreateLabel("yt: Maveryk1t")
mainTab:CreateLabel("discord: knzd1")

-- ABA INIMIGOS
local enemiesTab = win:CreateTab("Enemies")
enemiesTab:CreateSection("Enemy Farming")
enemiesTab:CreateToggle({ Name = "Enable Enemies", CurrentValue = config.farmEnemies, Callback = function(v) config.farmEnemies = v end })
enemiesTab:CreateSlider({
    Name = "Enemy Threads",
    Range = {1, 10},
    Increment = 1,
    CurrentValue = config.enemyThreads,
    Callback = function(v) config.enemyThreads = v end
})

enemiesTab:CreateSection("Event Enemies")
enemiesTab:CreateToggle({ Name = "Summer (All)", CurrentValue = enemyEnabled[1], Callback = function(v) enemyEnabled[1] = v end })
enemiesTab:CreateToggle({ Name = "Winter (All)", CurrentValue = enemyEnabled[2], Callback = function(v) enemyEnabled[2] = v end })
enemiesTab:CreateToggle({ Name = "Sphinx (Evil Eagle)", CurrentValue = enemyEnabled[3], Callback = function(v) enemyEnabled[3] = v end })

enemiesTab:CreateSection("Desert")
enemiesTab:CreateToggle({ Name = "Cursed Mummy", CurrentValue = enemyEnabled[4], Callback = function(v) enemyEnabled[4] = v end })

enemiesTab:CreateSection("Sky")
enemiesTab:CreateToggle({ Name = "Crazy Unicorn", CurrentValue = enemyEnabled[5], Callback = function(v) enemyEnabled[5] = v end })

enemiesTab:CreateSection("Tiki")
enemiesTab:CreateToggle({ Name = "Terror Tree", CurrentValue = enemyEnabled[6], Callback = function(v) enemyEnabled[6] = v end })

enemiesTab:CreateSection("Draco")
enemiesTab:CreateToggle({ Name = "Draco's Guard", CurrentValue = enemyEnabled[7], Callback = function(v) enemyEnabled[7] = v end })

-- ABA COMIDA
local foodTab = win:CreateTab("Food")
foodTab:CreateSection("Food Zones")
foodTab:CreateToggle({ Name = "Enable Food", CurrentValue = config.farmFood, Callback = function(v) config.farmFood = v end })
foodTab:CreateSlider({
    Name = "Food Threads",
    Range = {1, 10},
    Increment = 1,
    CurrentValue = config.foodThreads,
    Callback = function(v) config.foodThreads = v end
})
foodTab:CreateToggle({ Name = "Crystal Food", CurrentValue = foodZones[1].enabled, Callback = function(v) foodZones[1].enabled = v end })
foodTab:CreateToggle({ Name = "Draco Food", CurrentValue = foodZones[2].enabled, Callback = function(v) foodZones[2].enabled = v end })

-- ABA BOSSES
local bossTab = win:CreateTab("Bosses")
bossTab:CreateSection("Boss Control")
bossTab:CreateToggle({ Name = "Enable Boss Farming", CurrentValue = config.farmBosses, Callback = function(v) config.farmBosses = v end })
bossTab:CreateSlider({
    Name = "Boss Threads",
    Range = {1, 10},
    Increment = 1,
    CurrentValue = config.bossThreads,
    Callback = function(v) config.bossThreads = v end
})
bossTab:CreateToggle({ Name = "Enable All Bosses", CurrentValue = true, Callback = function(v)
    for _, name in ipairs(bossList) do bossEnabled[name] = v end
end })

bossTab:CreateSection("Boss List")
for _, name in ipairs(bossList) do
    bossTab:CreateToggle({
        Name = name,
        CurrentValue = bossEnabled[name],
        Callback = function(v) bossEnabled[name] = v end
    })
end

-- ABA OVOS
local eggTab = win:CreateTab("Eggs")
eggTab:CreateSection("Eggs Control")
eggTab:CreateToggle({ Name = "Auto Plant", CurrentValue = config.autoPlant, Callback = function(v) config.autoPlant = v end })
eggTab:CreateToggle({ Name = "Auto Hatch", CurrentValue = config.autoHatch, Callback = function(v) config.autoHatch = v end })
eggTab:CreateToggle({ Name = "Auto Nests", CurrentValue = config.autoNests, Callback = function(v) config.autoNests = v end })

eggTab:CreateSection("Threads")
eggTab:CreateSlider({
    Name = "Plant Threads",
    Range = {1, 10},
    Increment = 1,
    CurrentValue = config.plantThreads,
    Callback = function(v) config.plantThreads = v end
})
eggTab:CreateSlider({
    Name = "Hatch Threads",
    Range = {1, 10},
    Increment = 1,
    CurrentValue = config.hatchThreads,
    Callback = function(v) config.hatchThreads = v end
})
eggTab:CreateSlider({
    Name = "Nests Threads",
    Range = {1, 10},
    Increment = 1,
    CurrentValue = config.nestsThreads,
    Callback = function(v) config.nestsThreads = v end
})

eggTab:CreateSection("Speeds (0.001 - 2)")
eggTab:CreateSlider({
    Name = "Plant Speed",
    Range = {0.001, 2},
    Increment = 0.001,
    CurrentValue = config.plantSpeed,
    Callback = function(v) config.plantSpeed = v end
})
eggTab:CreateSlider({
    Name = "Hatch Speed",
    Range = {0.001, 2},
    Increment = 0.001,
    CurrentValue = config.hatchSpeed,
    Callback = function(v) config.hatchSpeed = v end
})
eggTab:CreateSlider({
    Name = "Nests Speed",
    Range = {0.001, 2},
    Increment = 0.001,
    CurrentValue = config.nestsSpeed,
    Callback = function(v) config.nestsSpeed = v end
})

eggTab:CreateSection("Select Eggs")
for _, egg in ipairs(eggData) do
    eggTab:CreateToggle({
        Name = egg.name,
        CurrentValue = false,
        Callback = function(val)
            if val then
                if not table.find(eggsSelected, egg.zone) then
                    table.insert(eggsSelected, egg.zone)
                end
            else
                local idx = table.find(eggsSelected, egg.zone)
                if idx then table.remove(eggsSelected, idx) end
            end
        end
    })
end

eggTab:CreateButton({
    Name = "Remove Hatch Animation",
    Callback = function()
        local ev = ReplicatedStorage and ReplicatedStorage:FindFirstChild("Remotes") and ReplicatedStorage.Remotes:FindFirstChild("Events")
        if ev and ev:FindFirstChild("HatchAnimationEvent") then
            ev.HatchAnimationEvent:Destroy()
        end
    end
})

-- ABA SACRIFÍCIO
local sacrificeTab = win:CreateTab("Sacrifice")
sacrificeTab:CreateSection("Summer Event")
sacrificeTab:CreateToggle({ 
    Name = "Queen Bee (Mythical) - Loop", 
    CurrentValue = sacrificeActive.queen, 
    Callback = function(v) 
        sacrificeActive.queen = v
        toggleSacrifice("Queen Bee", v)
    end 
})
sacrificeTab:CreateButton({ 
    Name = "Sacrifice Queen Bee (Once)", 
    Callback = function() 
        sacrificePet("Queen Bee")
    end 
})

sacrificeTab:CreateToggle({ 
    Name = "King Bee (Legendary) - Loop", 
    CurrentValue = sacrificeActive.king, 
    Callback = function(v) 
        sacrificeActive.king = v
        toggleSacrifice("King Bee", v)
    end 
})
sacrificeTab:CreateButton({ 
    Name = "Sacrifice King Bee (Once)", 
    Callback = function() 
        sacrificePet("King Bee")
    end 
})

sacrificeTab:CreateSection("Winter Event")
sacrificeTab:CreateToggle({ 
    Name = "Frozen Werewolf (Mythical) - Loop", 
    CurrentValue = sacrificeActive.frozen, 
    Callback = function(v) 
        sacrificeActive.frozen = v
        toggleSacrifice("Frozen Werewolf", v)
    end 
})
sacrificeTab:CreateButton({ 
    Name = "Sacrifice Frozen Werewolf (Once)", 
    Callback = function() 
        sacrificePet("Frozen Werewolf")
    end 
})

sacrificeTab:CreateToggle({ 
    Name = "Walrus (Legendary) - Loop", 
    CurrentValue = sacrificeActive.walrus, 
    Callback = function(v) 
        sacrificeActive.walrus = v
        toggleSacrifice("Walrus", v)
    end 
})
sacrificeTab:CreateButton({ 
    Name = "Sacrifice Walrus (Once)", 
    Callback = function() 
        sacrificePet("Walrus")
    end 
})

sacrificeTab:CreateSection("Sphinx Event")
sacrificeTab:CreateToggle({ 
    Name = "Fennec Fox (Mythical) - Loop", 
    CurrentValue = sacrificeActive.fennec, 
    Callback = function(v) 
        sacrificeActive.fennec = v
        toggleSacrifice("Fennec Fox", v)
    end 
})
sacrificeTab:CreateButton({ 
    Name = "Sacrifice Fennec Fox (Once)", 
    Callback = function() 
        sacrificePet("Fennec Fox")
    end 
})

sacrificeTab:CreateToggle({ 
    Name = "Mystic Camel (Legendary) - Loop", 
    CurrentValue = sacrificeActive.mystic, 
    Callback = function(v) 
        sacrificeActive.mystic = v
        toggleSacrifice("Mystic Camel", v)
    end 
})
sacrificeTab:CreateButton({ 
    Name = "Sacrifice Mystic Camel (Once)", 
    Callback = function() 
        sacrificePet("Mystic Camel")
    end 
})

-- ABA MISC
local miscTab = win:CreateTab("Misc")
miscTab:CreateSection("Movement")
miscTab:CreateToggle({ Name = "Infinite Double Jump", CurrentValue = config.doubleJump, Callback = function(v)
    config.doubleJump = v
    if v then
        local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid:SetStateEnabled(Enum.HumanoidStateType.Jumping, true)
            jumpCount = 0
            if not jumpConnection then
                jumpConnection = humanoid.Jumping:Connect(function()
                    jumpCount = jumpCount + 1
                    if jumpCount >= 2 then
                        humanoid.Jump = true
                        jumpCount = 0
                    end
                end)
            end
        end
    elseif jumpConnection then
        jumpConnection:Disconnect()
        jumpConnection = nil
        jumpCount = 0
    end
end })

miscTab:CreateSlider({ Name = "Walk Speed", Range = {16, 100}, Increment = 1, CurrentValue = config.wallspeed, Callback = function(v)
    config.wallspeed = v
    local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid.WalkSpeed = v
    end
end })

miscTab:CreateSection("Hotkey")
miscTab:CreateLabel("Press H to hide/show GUI")

local guiVisible = true
UserInputService.InputBegan:Connect(function(input, gp)
    if not gp and input.KeyCode == Enum.KeyCode.H then
        guiVisible = not guiVisible
        for _, v in pairs(win:GetChildren()) do
            if v:IsA("ScreenGui") then
                v.Enabled = guiVisible
            end
        end
    end
end)

-- Notificação de carregamento
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Maveryk Hub",
    Text = "Loaded successfully!",
    Duration = 3
})
