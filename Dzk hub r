local m=loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local p=game:GetService("Players")
local r=game:GetService("ReplicatedStorage")
local w=game:GetService("Workspace")
local l=p.LocalPlayer
local c=r.Remotes.Functions.CombatRF
local o=r.Remotes.Functions.CollectionRF
local h=r.Remotes.Events.HatchEggEvent
local e=r.Remotes.Events.PlantEggEvent
local z=r.Remotes.Functions.ZonesRF
local a=false
local t={}
local n={}
local function s(n,o)
    for _,v in pairs(getnilinstances()) do
        if v.ClassName==o and v.Name==n then
            return v
        end
    end
    return nil
end
local i={
    ["Summer Egg"]="SummerEvent1",
    ["Winter Egg"]="WinterEvent1",
    ["Draco Egg"]="34",
    ["Crystal Egg"]="12.1",
    ["Sphinx Egg"]="EleEgg1",
    ["Octopus Egg"]="30",
    ["Tiki Egg"]="24"
}
local b={
    {name="Naga",zone="Zone2B1",special=false},
    {name="Lava Monster",zone="Zone5B1",special=false},
    {name="Ghost Pirate",zone="Zone8B1",special=true,nilBoss=true},
    {name="Tiki Monster",zone="Zone10B1",special=false},
    {name="The Big 100M",zone="Zone12B3",special=false},
    {name="The Frozen Ancient",zone="Zone12B1",special=false},
    {name="The Ethereal Everia",zone="Zone12B2",special=false},
    {name="Hornet Boss",zone="SummerEventZoneB1",special=true},
    {name="The Ice Serpent",zone="WinterEventZoneB1",special=false},
    {name="Great Sphinx",zone="ElementEventZoneB1",special=false}
}
local N={
    ["Zone 1"]={"Evil Shroom","Evil Foot","Deermon"},
    ["Zone 2"]={"Creepy Cat","Enchanted Cobra","Cursed Mummy"},
    ["Zone 3"]={"Wicked Wolf","Evil Frozen Yeti","Dark Spike"},
    ["Zone 4"]={"Creepy Slime","Deadly Elephant","Evil Ogre"},
    ["Zone 5"]={"Dark Cloud","Enchanted Macaw","Crazy Unicorn"},
    ["Zone 6"]={"Raging Lion","Mad Golum","Forbidden Dragon"},
    ["Zone 7"]={"Dark Griffin","Evil Minotaur","Cursed Medusa"},
    ["Zone 8"]={"Evil Starfish","Angry Crab","Deadly Octopus"},
    ["Zone 9"]={"Vile Bat","Menacing Sting","Dark Planet"},
    ["Zone 10"]={"Mad Penguin","Cursed Moai","Terror Tree"},
    ["Zone 11"]={"Rotten Bush","Deadly Beetle","Dark Knight"},
    ["Zone 12"]={"Draco's Guard"}
}
local d={
    autoHash=true,
    autoPlant=true,
    hatchCount=15,
    plantCount=8,
    eggInterval=1.5,
    farmBosses=true,
    bossDelay=0.3,
    farmSummer=true,
    summerDelay=0.2,
    farmFood=true,
    foodDelay=0.3,
    farmNPCs=false,
    npcDelay=0.5
}
local S={"SummerEvent1"}
local B={}
local P={}
for _,v in ipairs(b) do
    B[v.name]=true
end
for k,v in pairs(N) do
    P[k]={}
    for _,x in ipairs(v) do
        P[k][x]=true
    end
end
local f={
    bosses="Idle",
    summer="Idle",
    food="Idle",
    eggs="Idle",
    npcs="Idle"
}
local function g(k)
    if not n[k] then
        n[k]=w.Zones:FindFirstChild(k)
    end
    return n[k]
end
local function u()
    if not l.Character then return {} end
    local x=l.Character:FindFirstChild("Pets")
    return x and x:GetChildren() or {}
end
local function L(n,o,i)
    if t[n] then
        t[n]=false
        task.wait(0.1)
    end
    t[n]=true
    task.spawn(function()
        while t[n] and a do
            local s,e=pcall(o)
            if not s then
                warn("Loop error: "..e)
            end
            task.wait(i)
        end
    end)
end
local function E()
    f.eggs="Active"
    if d.autoHash then
        for x=1,d.hatchCount do
            if not a then break end
            pcall(function()
                h:FireServer()
            end)
            task.wait(0.01)
        end
    end
    if d.autoPlant and #S>0 then
        for _,v in ipairs(S) do
            for x=1,d.plantCount do
                if not a then break end
                pcall(function()
                    e:FireServer(v)
                end)
                task.wait(0.02)
            end
            task.wait(0.05)
        end
    end
end
local function O()
    if not d.farmBosses then
        f.bosses="Disabled"
        return
    end
    local x=u()
    if #x==0 then
        f.bosses="No pets"
        return
    end
    f.bosses="Active"
    for _,v in ipairs(b) do
        if not a then break end
        if not B[v.name] then continue end
        if v.special then
            pcall(function()
                z:InvokeServer("RequestZoneMap",v.zone)
            end)
            task.wait(0.1)
        end
        local i=nil
        if v.nilBoss then
            i=s(v.name,"Vector3Value")
        else
            local o=g(v.zone)
            if o then
                local n=o:FindFirstChild("Enemies")
                if n then
                    i=n:FindFirstChild(v.name)
                end
            end
        end
        if i then
            for _=1,4 do
                if not a then break end
                for _,p in ipairs(x) do
                    pcall(function()
                        c:InvokeServer("AttackEnemy",i,p)
                    end)
                end
                task.wait(0.05)
            end
            task.wait(0.1)
        end
    end
end
local function U()
    if not d.farmSummer then
        f.summer="Disabled"
        return
    end
    local x=g("SummerEventZone")
    if not x then
        f.summer="Zone not found"
        return
    end
    local n=x:FindFirstChild("Enemies")
    if not n then
        f.summer="No enemies"
        return
    end
    local p=u()
    if #p==0 then
        f.summer="No pets"
        return
    end
    f.summer="Active"
    for _,v in ipairs(n:GetChildren()) do
        if not a then break end
        for _,x in ipairs(p) do
            pcall(function()
                c:InvokeServer("AttackEnemy",v,x)
            end)
        end
        task.wait(0.02)
    end
end
local function C()
    if not d.farmFood then
        f.food="Disabled"
        return
    end
    local x=g("Zone12.1")
    if not x then
        f.food="Zone not found"
        return
    end
    local n=x:FindFirstChild("FoodSpawns")
    if not n then
        f.food="No food"
        return
    end
    local p=u()
    if #p==0 then
        f.food="No pets"
        return
    end
    f.food="Active"
    for _,v in ipairs(n:GetChildren()) do
        if not a then break end
        for _,x in ipairs(p) do
            pcall(function()
                o:InvokeServer("CollectFood",v,x)
            end)
        end
        task.wait(0.015)
    end
end
local function D()
    if not d.farmNPCs then
        f.npcs="Disabled"
        return
    end
    local x=u()
    if #x==0 then
        f.npcs="No pets"
        return
    end
    f.npcs="Active"
    for k,v in pairs(P) do
        if not a then break end
        local n=k:match("%d+")
        local o="Zone"..n
        local i=g(o)
        if not i then continue end
        local s=i:FindFirstChild("Enemies")
        if not s then continue end
        for p,c in pairs(v) do
            if not a then break end
            if not c then continue end
            local x=s:FindFirstChild(p)
            if x then
                for _,n in ipairs(x) do
                    pcall(function()
                        c:InvokeServer("AttackEnemy",x,n)
                    end)
                end
                task.wait(0.03)
            end
        end
    end
end
local function A()
    if a then return end
    a=true
    m:Notify({
        Title="Farm Started",
        Content="All selected farms are now active",
        Duration=3,
    })
    if d.autoHash or d.autoPlant then
        L("EggFarm",E,d.eggInterval)
    end
    if d.farmBosses then
        L("BossFarm",O,d.bossDelay)
    end
    if d.farmSummer then
        L("SummerFarm",U,d.summerDelay)
    end
    if d.farmFood then
        L("FoodFarm",C,d.foodDelay)
    end
    if d.farmNPCs then
        L("NPCFarm",D,d.npcDelay)
    end
end
local function R()
    a=false
    for k,_ in pairs(t) do
        t[k]=false
    end
    f.bosses="Idle"
    f.summer="Idle"
    f.food="Idle"
    f.eggs="Idle"
    f.npcs="Idle"
    m:Notify({
        Title="Farm Stopped",
        Content="All farms stopped",
        Duration=3,
    })
end
task.spawn(function()
    while true do
        task.wait(300)
        n={}
    end
end)
local W=m:CreateWindow({
    Name="DZK HUB",
    LoadingTitle="Initializing...",
    LoadingSubtitle="Pet Swarm Farm ",
    ConfigurationSaving={
        Enabled=true,
        FolderName="Maveryk1t Hub",
        FileName="Config"
    },
    Theme="Dark"
})
local M=W:CreateTab("üè† Main")
local H=W:CreateTab("ü•ö Eggs")
local T=W:CreateTab("üëë Bosses")
local Y=W:CreateTab("ü§ñ NPCs")
local F=W:CreateTab("‚öôÔ∏è Settings")
M:CreateSection("Control")
M:CreateButton({
    Name="‚ñ∂ Start Farming",
    Callback=A,
})
M:CreateButton({
    Name="‚ñ† Stop Farming",
    Callback=R,
})
M:CreateSection("Status")
local k=M:CreateLabel("Status: Idle")
local Q=M:CreateLabel("Bosses: Idle")
local I=M:CreateLabel("Summer: Idle")
local J=M:CreateLabel("Food: Idle")
local K=M:CreateLabel("Eggs: Idle")
local _=M:CreateLabel("NPCs: Idle")
task.spawn(function()
    while true do
        task.wait(0.5)
        if a then
            k:Set("Status: Active")
        else
            k:Set("Status: Idle")
        end
        Q:Set("Bosses: "..f.bosses)
        I:Set("Summer: "..f.summer)
        J:Set("Food: "..f.food)
        K:Set("Eggs: "..f.eggs)
        _:Set("NPCs: "..f.npcs)
    end
end)
H:CreateSection("Egg Selection")
local G={}
for p,v in pairs(i) do
    G[p]=H:CreateToggle({
        Name=p.." ("..v..")",
        CurrentValue=table.find(S,v)~=nil,
        Flag="Egg_"..p,
        Callback=function(x)
            if x then
                if not table.find(S,v) then
                    table.insert(S,v)
                end
            else
                local n=table.find(S,v)
                if n then
                    table.remove(S,n)
                end
            end
        end,
    })
end
H:CreateSection("Settings")
H:CreateToggle({
    Name="Auto Hash",
    CurrentValue=d.autoHash,
    Flag="AutoHash",
    Callback=function(v)
        d.autoHash=v
    end,
})
H:CreateToggle({
    Name="Auto Plant",
    CurrentValue=d.autoPlant,
    Flag="AutoPlant",
    Callback=function(v)
        d.autoPlant=v
    end,
})
H:CreateSlider({
    Name="Hatch Count",
    Range={1,30},
    Increment=1,
    Suffix=" times",
    CurrentValue=d.hatchCount,
    Flag="HatchCount",
    Callback=function(v)
        d.hatchCount=v
    end,
})
H:CreateSlider({
    Name="Plant Count",
    Range={1,15},
    Increment=1,
    Suffix=" times",
    CurrentValue=d.plantCount,
    Flag="PlantCount",
    Callback=function(v)
        d.plantCount=v
    end,
})
H:CreateSlider({
    Name="Egg Interval",
    Range={0.5,5},
    Increment=0.1,
    Suffix=" seconds",
    CurrentValue=d.eggInterval,
    Flag="EggInterval",
    Callback=function(v)
        d.eggInterval=v
    end,
})
T:CreateSection("Boss Selection")
local X={}
for _,v in ipairs(b) do
    X[v.name]=T:CreateToggle({
        Name=v.name.." ("..v.zone..")",
        CurrentValue=B[v.name] or false,
        Flag="Boss_"..v.name,
        Callback=function(x)
            B[v.name]=x
            d.farmBosses=true
        end,
    })
end
T:CreateSection("Settings")
T:CreateToggle({
    Name="Enable Boss Farm",
    CurrentValue=d.farmBosses,
    Flag="BossFarm",
    Callback=function(v)
        d.farmBosses=v
    end,
})
T:CreateSlider({
    Name="Boss Delay",
    Range={0.1,1},
    Increment=0.1,
    Suffix=" seconds",
    CurrentValue=d.bossDelay,
    Flag="BossDelay",
    Callback=function(v)
        d.bossDelay=v
    end,
})
Y:CreateSection("NPC Selection")
local V={}
for x=1,12 do
    V[x]="Zone "..x
end
for _,p in ipairs(V) do
    local v=N[p]
    if v then
        Y:CreateSection("Zone "..p:match("%d+"))
        for _,x in ipairs(v) do
            Y:CreateToggle({
                Name=x,
                CurrentValue=P[p][x] or false,
                Flag="NPC_"..p.."_"..x,
                Callback=function(n)
                    P[p][x]=n
                    d.farmNPCs=true
                end,
            })
        end
    end
end
Y:CreateSection("Settings")
Y:CreateToggle({
    Name="Enable NPC Farm",
    CurrentValue=d.farmNPCs,
    Flag="NPCFarm",
    Callback=function(v)
        d.farmNPCs=v
    end,
})
Y:CreateSlider({
    Name="NPC Delay",
    Range={0.1,1},
    Increment=0.1,
    Suffix=" seconds",
    CurrentValue=d.npcDelay,
    Flag="NPCDelay",
    Callback=function(v)
        d.npcDelay=v
    end,
})
F:CreateSection("Farming Modules")
F:CreateToggle({
    Name="Summer Farm",
    CurrentValue=d.farmSummer,
    Flag="SummerFarm",
    Callback=function(v)
        d.farmSummer=v
    end,
})
F:CreateSlider({
    Name="Summer Delay",
    Range={0.1,1},
    Increment=0.1,
    Suffix=" seconds",
    CurrentValue=d.summerDelay,
    Flag="SummerDelay",
    Callback=function(v)
        d.summerDelay=v
    end,
})
F:CreateToggle({
    Name="Food Farm",
    CurrentValue=d.farmFood,
    Flag="FoodFarm",
    Callback=function(v)
        d.farmFood=v
    end,
})
F:CreateSlider({
    Name="Food Delay",
    Range={0.1,1},
    Increment=0.1,
    Suffix=" seconds",
    CurrentValue=d.foodDelay,
    Flag="FoodDelay",
    Callback=function(v)
        d.foodDelay=v
    end,
})
m:Notify({
    Title="‚ö° DZK HUB",
    Content="Farm System Initialized",
    Duration=5,
})
